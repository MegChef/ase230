---
marp: true
---

# Q4. CRUD Operations using PDO

---

## Question 4.1

This is a PHP code snippet to make a PDO connection setup with proper error handling and recommended options. What are ??#

```php
try {
    $dsn = "mysql:host={$servername};dbname={$dbname};charset=utf8mb4";
    $options = [...];
    $pdo = new ??1($dsn, $username, $password, $options);
} catch (??2 $e) {
    exit("Connection failed: " . htmlspecialchars($e->getMessage()));
}
?>
```

**Answer:**

??1 - PDO
??2 - PDOException

---

## Question 4.2

What does `declare(strict_types=1);` do, and why is it recommended?

**Answer:**
declare(strict_types=1); enforces strict type checking in PHP.

- Without it, PHP will try to convert types automatically (e.g., string "5" to int 5).

- With it, function arguments and return values must match the declared types exactly.

- Recommended for catching bugs early and writing safer, more predictable code.

---

## Question 4.3

This is a skeleton PDO code to execute an SQL string using PDO. What are ??#

```php
echo "<h2>CREATE - Adding New Students</h2>";

try {
    $sql  = ...
    $stmt = $pdo->??1($sql);
    $stmt->??2([ ... ]);
} catch (PDOException $e) {
    echo "$e->??3()"
}
```

**Answer:**

??1 - prepare
??2 - execute
??3 - getMessage

---

## Question 4.4

This is a skeleton of PDO to READ (display) all student records using a simple `query + fetchAll` approach.
What are ??#

```php
    $sql    = "SELECT id, name, age, major FROM students";
    $rows   = $pdo->??1($sql)->??2();

    if ($rows && count($rows) > 0) { ...
    } else { ...
    }
```

**Answer:**

??1 - query
??2 - fetchALL

---

## Question 4.5

What's the difference between `fetchAll()` and `fetch()` in PDO?

**Answer:**
- fetchAll() → retrieves all rows from the result set into an array.
- fetch() → retrieves just the next single row from the result set.
  
---

## Question 4.6

This is a skeleton of PDO code to display READ (select) a specific student by ID using the (prepare + execute + fetch) approach. 
What are ??#

```php
try {
    $student_id = 1;
    $sql  = "SELECT id, name, age, major FROM students WHERE id = :id";
    $stmt = $pdo->??1($sql);
    $stmt->??2([':id' => $student_id]);
    $row = $stmt->??3();

    if ($row) { ... 
    } else { ...
    }
} catch (PDOException $e) { ... }
```
---

**Answer:**

??1 - prepare
??2 - excute
??3 - fetch

---

## Question 4.7

This is a skeleton of PDO code to UPDATE an existing student record with error handling.
What is the ??# to prepare/execute/get the total count of rows?

```php
try {
    $sql  = "UPDATE students
             SET name = :name, age = :age, major = :major
             WHERE id = :id";
    $stmt = $pdo->??1($sql);
    $stmt->??2([ ... ]);

    if ($stmt->??3() > 0) {
    } else {
    }
} catch (PDOException $e) { ... }
```
---

**Answer:**

??1 - prepare
??2 - execute
??3 - rowCount

---

## Question 4.8

What does `rowCount()` return, and when should you use it?

**Answer:**
rowCount() returns the number of rows affected by the last SQL statement (INSERT, UPDATE, or DELETE).

Use it to check if a write operation actually modified any records.

---

## Question 4.9

The `rowCount()` returns 0, so the UPDATE failed. (T/F)

**Answer:**
False — rowCount() returning 0 does not always mean the update failed.

It may mean the query ran successfully but the data didn’t change (e.g., updating with the same values).

---

## Question 4.10

This is a skeleton of PDO code to DELETE a student record with proper error handling.
What is the ??# to prepare/execute/get the total count of rows?

```php
try {
    $delete_id = 2;
    $sql  = "DELETE FROM students WHERE id = :id";
    $stmt = $pdo->??1($sql);
    $stmt->??2([':id' => $delete_id]);

    if ($stmt->??3() > 0) { ...
    } else { ...
    }
} catch (PDOException $e) { ...
}
```
---

**Answer:**

??1 - prepare
??2 - execute
??3 - rowCount

---

## Question 4.11

What are the advantages of using PDO instead of MySQLi?

**Answer:**
Advantages of PDO over MySQLi:

1. Database independence → works with many databases (MySQL, PostgreSQL, SQLite, Oracle, etc.)

2. Consistent API → same functions regardless of database.

3. Advanced features → better error handling, transactions, named parameters.

---

## Question 4.12

Why should you use `htmlspecialchars()` when displaying error messages?

**Answer:**
Use htmlspecialchars() when displaying error messages to prevent XSS (Cross-Site Scripting) by escaping special characters (<, >, ", ').
- Ensures user/browser sees text safely instead of executing malicious HTML/JavaScript.

---

## Summary

We have 12 questions on this page.

1. How many questions did you answer? (12 / 12)
2. What percentage of questions did you answer? (100%)
3. List question numbers that you cannot answer: N/A
4. (Optional) Explain why you could not answer these questions.
