---
marp: true
---

# Q1. Session Management with SessionAuth

---

## Question 1.1

```txt
User visits page 1: "Hi, I'm John."
User visits page 2: "Who are you again?" ü§∑‚Äç‚ôÇÔ∏è
```

What security technology can solve this problem?

**Answer:**
Sessions

---

## Question 1.2

The server forgets everything after each request, and there is no memory of previous interactions for sessions. (T/F)

**Answer:**
True

---

## Question 1.3

These are the first 2 steps of how sessions work in PHP. Fill in ??#.

**Step 1: Start Session**

```php
??1(); // Must be first line!
```

**Step 2: Store Data**

```php
??2['user_id'] = 123; ??2['username'] = 'john';
```

**Answer:**

??1 ‚Üí session_start
??2 ‚Üí $_SESSION

---

## Question 1.4

These are the last 2 steps of how sessions work in PHP. Fill in ??#.

**Step 3: PHP Magic**

- Creates unique ??3: `abc123def456`
- Sends cookie to browser: `PHPSESSID=abc123def456`
- Saves your data on the server

**Step 4: Remember Later**

- Browser sends cookie with every ??4
- PHP loads your data automatically
- `$_SESSION` array is ready to use!

---

**Answer:**

??3 ‚Üí Session ID
??4 ‚Üí request

---

## Question 1.5

What is the function to start whenever we use sessions in PHP?

Also, what is the function to use to destroy the sessions we made?

**Answer:**
Start ‚Üí session_start()
Destroy ‚Üí session_destroy()

---

## Question 1.6

In the session/basic PHP program, it has two issues. The first one is code duplication, and what is the other one?

**Answer:**
No central management of session logic (scattered code / lack of abstraction)

---

## Question 1.7

To resolve this issue, we use OOP by introducing a class. What is the name of the class we make to resolve this issue? (Hint: it is in session/sessionauth/SessionAuth.php)

What is the name of the method to store user information in the session? (Hint: it is the first method after the constructor).

**Answer:**
Class ‚Üí SessionAuth
Method ‚Üí storeUser

---

## Question 1.8

This is PHP code to use the class. Fill in ??#.

```php
<?php
require_once 'SessionAuth.php';
$auth = new ??1();

if ($_POST && $_POST['username'] == 'john' && $_POST['password'] == 'secret') {
    $user_data = [
        'id' => 1,
        'username' => 'john'
    ];
    $auth->??2($user_data);
    header('Location: welcome.php');
    exit;
}
?>
```
---

**Answer:**

??1 ‚Üí SessionAuth
??2 ‚Üí storeUser

---

## Question 1.9

This is the basic structure of a SessionAuth class constructor. Fill in ??#.

```php
class SessionAuth {
    public function __construct() {
        if (??1() === PHP_SESSION_NONE) {
            ??2();
        }
    }
}
```

**Answer:**

??1 ‚Üí session_status
??2 ‚Üí session_start

---

## Question 1.10

The attacker sets the victim's session ID and then waits for the victim to log in. After logging in, the attacker can use the same session ID to access the victim's account.

What's the name of this attack?
What is the solution?

**Answer:**
Attack ‚Üí Session Fixation
Solution ‚Üí Regenerate session ID after login (session_regenerate_id(true))

---

## Question 1.11

What row is about sessions, and what row is about cookies? Fill in ??#.

| Method | Server Storage | Client Storage  | Security  | Expiration      |
|--------|----------------|-----------------|-----------|-----------------|
| ??1    | ‚úÖ Yes          | Session ID only | ‚úÖ High    | Server controls |
| ??2    | ‚ùå No           | ‚úÖ Full data     | ‚ö†Ô∏è Medium | Client controls |

**Answer:**

??1 ‚Üí Session
??2 ‚Üí Cookie

---

## Question 1.12

Sessions are most secure for sensitive data! (T/F)

**Answer:**
True

---

## Summary

We have 12 questions on this page.

1. How many questions did you answer? (12 / 12)
2. What percentage of questions did you answer? (100%)
3. List question numbers that you cannot answer: N/A
4. (Optional) Explain why you could not answer these questions.
