---
marp: true
---

# Q2. Building a REST API Server with PHP

---

## Question 1

What are the five primary API endpoints (students) for a User Management API Server?

**Answer:**
GET /students → Get all students
GET /students/{id} → Get single student
POST /students → Create new student
PUT /students/{id} → Update student
DELETE /students/{id} → Delete student

---

## Question 2

We can support as many APIs as we can use (1) GET/POST & (2) endpoints such as `count` or `search`.

**Answer:**
True

---

## Question 3

We use JSON for data storage, but in real projects, we should use MySQL (T/F).

**Answer:**
True

---

## Question 4

Make the header function with the features:

- **Content-Type**: Tells the client the response is JSON
- **Allow-Methods**: Specifies allowed HTTP methods for CORS
- **Allow-Headers**: Allows Content-Type header in requests
- **Allow-Origin**: Enables CORS from any domain

**Answer:**
```php
header("Content-Type: application/json");
header("Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS");
header("Access-Control-Allow-Headers: Content-Type");
header("Access-Control-Allow-Origin: *");
```
---

## Question 5

It is an automatic OPTIONS request sent by browsers before specific HTTP requests to check if the actual request is allowed.

What is it?

**Answer:**
Preflight Request

---

## Question 6

When browsers make requests such as PUT/DELETE or include custom headers, they send an OPTIONS request, and we should return a 200 response to allow the request.

Fill in ??# to implement this feature in PHP.

```php
if ($_SERVER['REQUEST_METHOD'] === '??1') {
    http_response_code(??2);
    exit();
}
```

**Answer:**

??1 = OPTIONS
??2 = 200

---

## Question 7

What are the HTML methods that are considered simple?

**Answer:**
- GET
- POST
- HEAD

---

## Question 8

For URL `/students/123`, we need to extract "students" and "123" and store them into variables `$resource = "students"` and `$id = 123` This is the skeleton code. What is the PHP function that explodes the path into elements?

```php
$method = $_SERVER['REQUEST_METHOD'];
$path = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);
$path = trim($path, '/');

// Split path into segments
$segments = ???('/', $path);
$resource = $segments[0] ?? ''; // students
$id = $segments[1] ?? null;     // 123
```

**Answer:**
explode

---

## Question 9

What operator (OP in the code) returns the left-hand value if it exists and is not null, otherwise returns the right-hand value?

```php
$resource = $segments[0] OP '';
$id = $segments[1] OP null;
```

**Answer:**
Null coalescing operator ??

---

## Question 10

This is the complete router switch statement for handling different HTTP methods.

How to get the $method from the user's request? Fill in ???

```php
$method = ??? 
switch ($method) {
  case 'GET': ...
  case 'POST': ...
  case 'PUT': ...
  case 'DELETE': ...
  default: ...
}
```

**Answer:**
$_SERVER['REQUEST_METHOD']

---

## Question 11

In this PHP code to process the GET request, when we receive a single student ID ($student_id), we call the get_student function with the ID. If not, we call the get_all_students() function.

Fill in ??#.

```php
switch ($method) {
  case 'GET':
      if ($student_id) { ??1($student_id); } 
      else { ??2(); }
      break;
```

**Answer:**

??1 = get_student
??2 = get_all_students

---

## Question 12

We need to make a Student class (models/Student.php) to manage students' information effectively. (T/F)

**Answer:**
True

---

## Question 13

Fill in ??? to make a Student constructor.

```php
class Student {
    private $id;
    ...
    
    /**
     * Constructor - creates a new student
     */
    public function ???() {
        $this->created_at = date('Y-m-d H:i:s');
        $this->updated_at = date('Y-m-d H:i:s');
    }
```

**Answer:**
__construct

---

## Question 14

What is the OK code to return success?

**Answer:**
200

---

## Question 15

This is the PHP code to load students from a JSON file safely (handlers.php): Checking if the file exists and making students array from JSON string to return. Fill in ??#

```php
function load_students() {
    $file_path = 'data/students.json';
    if (!??1($file_path)) {return [];}
    $json_data = file_get_contents($file_path);
    $students = ??2($json_data, true);
    
    return $students ?: [];
}
```

**Answer:**

??1 = file_exists
??2 = json_decode

---

## Question 16

We need to use PHP functions to get a JSON string in the HTML request. This is the PHP function to do that; fill the ???

```php
function getRequestData()
{
    $input = file_get_contents('???');
    return json_decode($input, true) ?? [];
}
```

**Answer:**
php://input

---

## Question 17

It is known that `unset()` leaves a hole in the array, so what function should we use instead when removing array elements?

```php
// DON'T do this for deletion:
unset($students[$i]);  // Leaves a "hole" in the array
```

**Answer:**
array_splice()

---

## Question 18

This is HTML/JavaScript code to call the getAllStudents() JavaScript function when the button is clicked. Fill in ???

```html
<div class="test-section">
    <h3>1. Get All Students</h3>
    <button onclick="???()">GET /students</button>
    <pre id="all-students-result"></pre>
</div>

async function getAllStudents() { ... }
```

**Answer:**
getAllStudents

---

## Summary

We have 18 questions on this page.

1. How many questions did you answer? (18 / 18)
2. What percentage of questions did you answer? (100%)
3. List question numbers that you cannot answer: N/A
4. (Optional) Explain why you could not answer these questions.
