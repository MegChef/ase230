{
    "name": "laravel/laravel-docker",
    "type": "project",
    "description": "Simple Laravel with Docker",
    "license": "MIT",
    "require": {
        "php": "^8.1",
        "laravel/framework": "^10.10",
        "laravel/tinker": "^2.8"
    },
    "require-dev": {
        "fakerphp/faker": "^1.9.1",
        "phpunit/phpunit": "^10.1"
    },
    "autoload": {
        "psr-4": {
            "App\\": "app/",
            "Database\\Factories\\": "database/factories/",
            "Database\\Seeders\\": "database/seeders/"
        }
    },
    "autoload-dev": {
        "psr-4": {
            "Tests\\": "tests/"
        }
    },
    "scripts": {
        "start": "docker-compose up -d",
        "setup": [
            "sleep 10",
            "docker exec laravel-php php artisan key:generate",
            "docker exec laravel-php php artisan migrate"
        ],
        "dev": [
            "@start",
            "@setup"
        ],
        "stop": "docker-compose down",
        "shell": "docker exec -it laravel-php bash",
        "artisan": "docker exec laravel-php php artisan",
        "mysql-check": "docker exec laravel-php php -r \"echo 'Testing MySQL connection...'; try { new PDO('mysql:host=mysql;dbname=laravel', 'laravel', 'laravel_password'); echo 'SUCCESS: Connected to MySQL!'; } catch(Exception \\$e) { echo 'ERROR: ' . \\$e->getMessage(); }\"",
        "backup": "docker exec laravel-mysql mysqldump -u root -proot laravel > backups/$(date +%Y%m%d_%H%M%S).sql",
        "restore": "docker exec -i laravel-mysql mysql -u root -proot laravel"
      }        
    },
    "config": {
        "optimize-autoloader": true,
        "preferred-install": "dist",
        "sort-packages": true
    },
    "minimum-stability": "stable",
    "prefer-stable": true
}
